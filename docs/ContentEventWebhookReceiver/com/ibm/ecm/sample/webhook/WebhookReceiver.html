<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0) on Wed Feb 26 14:56:30 PST 2020 -->
<title>WebhookReceiver (ContentEventWebhookReceiver API)</title>
<meta name="date" content="2020-02-26">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WebhookReceiver (ContentEventWebhookReceiver API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div role="navigation" title ="TOP_Navigation" aria-label ="Top Navigation Bar"/>
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../com/ibm/ecm/sample/webhook/WebhookReceiverApplication.html" title="class in com.ibm.ecm.sample.webhook"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/ibm/ecm/sample/webhook/WebhookReceiver.html" target="_top">Frames</a></li>
<li><a href="WebhookReceiver.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div role="main" title ="WebhookReceiver" aria-labelledby ="Header1"/>
<div class="header">
<div class="subTitle">com.ibm.ecm.sample.webhook</div>
<h2 title="Class WebhookReceiver" class="title" id="Header1">Class WebhookReceiver</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.ibm.ecm.sample.webhook.WebhookReceiver</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Path(value="/receiver/")
public class <span class="typeNameLabel">WebhookReceiver</span>
extends java.lang.Object</pre>
<div class="block">Main servlet, which handles the logic for the Content Event Webhook Receiver.
 Whenever the Webhook External Event Action makes a call to the Webhook
 Receiver on the <code>/receiver</code> path of this application, the methods of
 this class will process the call.
 <p>
 This sample application only has one method,
 <a href="../../../../../com/ibm/ecm/sample/webhook/WebhookReceiver.html#listener-java.lang.String-"><code>listener(String)</code></a>, to handle POST calls for this
 servlet. This class can be extended with more methods to handle other
 scenarios.
 <p>
 Note that the sample application primarily attempts to demonstrate how to do
 certain actions. Some of the example logic is not necessarily realistic and
 might not be used in an actual Webhook Receiver application. In developing a
 real life Webhook Receiver application, feel free to remove logic that is not
 required.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../com/ibm/ecm/sample/webhook/WebhookReceiver.html#WebhookReceiver--">WebhookReceiver</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>javax.ws.rs.core.Response</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/ibm/ecm/sample/webhook/WebhookReceiver.html#listener-java.lang.String-">listener</a></span>(java.lang.String&nbsp;eventJson)</code>
<div class="block">This is the entry point for the Webhook Receiver to receive events from
 Content Platform Engine.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="WebhookReceiver--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>WebhookReceiver</h4>
<pre>public&nbsp;WebhookReceiver()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="listener-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>listener</h4>
<pre>@POST
 @Consumes(value="application/json")
public&nbsp;javax.ws.rs.core.Response&nbsp;listener(java.lang.String&nbsp;eventJson)</pre>
<div class="block">This is the entry point for the Webhook Receiver to receive events from
 Content Platform Engine. Every time an event is received, the following
 events will occur.
 
 <p>
 <ol>
 <li>Parse the JSON payload from the Webhook External Event Action call
 <li>Ping the Content Services GraphQL Server
 <li>If the event is a <code>CreationEvent</code>:
 <ul>
 <li>Retrieve the Webhook Event Action and subscription created when the
 Receiver application started.
 <li>Check if the subscription that triggered the callout is associated
 with the first event action created by the Receiver application.
 <li>If the subscription that triggered the callout is the same as the
 first subscription created on startup, update the event action and
 subscription name and description. Also, change the subscription to be
 subscribed to <code>UpdateEvent</code> instead of <code>CreationEvent</code>.
 </ul>
 <li>Retrieve the source document and its properties. (Note: Source object
 properties are in the JSON payload of the External Event Action call. The
 GraphQL API call to retrieve the document is merely an example. In a real
 life use case it might be better to parse the JSON payload for the
 properties instead of calling the GraphQL API unless you need to retrieve
 the content of the document).
 <li>If this event was triggered by a <code>CreationEvent</code>, keep track of
 the object for later deletion when the Webhook Receiver sample
 application shuts down.
 <li>Parse the JSON of the retrieved source object for specific custom
 properties (<code>WebhookDollarAmount</code>, <code>WebhookPriority</code>, and
 <code>WebhookRiskFactor</code>). These properties are defined on the class
 definition of the subscribed custom class <code>WebhookClaim</code>.
 <li>Perform custom backend processing of the document and its custom
 properties. This section is left blank on purpose. In a real life
 application, the enterprise specific processing would go here. As this is
 only a sample application, it is left as an exercise for the user to
 provide the logic for processing the source object.
 <li>If the <code>WebhookRiskFactor</code> value has not been set, update the
 source object to set the property to and arbitrary value (<code>15</code>).
 Make sure not to update the object if <code>WebhookRiskFactor</code> value has
 already been set, or we will get stuck in an infinite loop, as each
 update will trigger another event.
 </ol>
 <p>
 Note that some of the logic below might not be realistic or desirable in
 a real Webhook Receiver application. Some of the logic is included only
 for demonstration purposes as an example and can be removed if it does
 not make sense for an actual use case.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>eventJson</code> - JSON payload from the Content Event Webhook External Event
            Action call</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An Ok response if everything goes well, or another response if
         something is wrong. If a GraphQL call returns an error code, that
         error code will be returned here as well.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div role="navigation" title ="Bottom_NAVIGATION" aria-label ="Bottom Navigation Bar"/>
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../com/ibm/ecm/sample/webhook/WebhookReceiverApplication.html" title="class in com.ibm.ecm.sample.webhook"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/ibm/ecm/sample/webhook/WebhookReceiver.html" target="_top">Frames</a></li>
<li><a href="WebhookReceiver.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
